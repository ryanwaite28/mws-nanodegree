<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Normalize.css for better cross-browser consistency -->
  <!-- <link rel="stylesheet" href="https://normalize-css.googlecode.com/svn/trunk/normalize.css" /> -->

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#252831">

  <link rel="shortcut icon" href="/favicon.ico"/>

  <style>
  @charset "utf-8";body,td,th,p{font-family:Arial,Helvetica,sans-serif;font-size:10pt;color:#333;line-height:1.5}body{background-color:#fdfdfd;margin:0}ul,li{font-family:Arial,Helvetica,sans-serif;font-size:10pt;color:#333}a{color:orange;text-decoration:none}a:hover,a:focus{color:#3397db;text-decoration:none}a img{border:none 0 #fff}h1,h2,h3,h4,h5,h6{font-family:Arial,Helvetica,sans-serif;margin:0 0 20px}article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}#maincontent{background-color:#f3f3f3;min-height:100%;padding-top:60px}#footer{background-color:#444;color:lightgrey;font-size:8pt;letter-spacing:1px;padding:25px 0;text-align:center;text-transform:uppercase;position:fixed;bottom:0;right:0;width:100%}nav{position:fixed;width:100%;background-color:#252831;text-align:center;z-index:100}nav h1{margin:auto;height:60px;line-height:60px;vertical-align:middle}nav h1 a{color:#fff;font-size:14pt;font-weight:200;letter-spacing:10px;text-transform:uppercase}#breadcrumb{padding:15px;list-style:none;background-color:#eee;font-size:17px;margin:0;max-width:100%}#breadcrumb li{display:inline}#breadcrumb li+li:before{padding:8px;color:black;content:"/\00a0"}#breadcrumb li a{color:#0059b3;text-decoration:none}#breadcrumb li a:hover{color:#0275d8;text-decoration:underline}#map{min-height:275px;height:50vh;width:100%;background-color:#ccc}.filter-options{height:auto;background-color:#0059b3;align-items:center;padding:10px}.filter-options h2{color:white;font-size:1.5rem;font-weight:400;height:45px;line-height:45px;vertical-align:middle;margin:0 10px;text-align:center}.filter-options select{background-color:white;border:1px solid #fff;font-family:Arial,sans-serif;font-size:11pt;height:35px;letter-spacing:0;margin:10px;padding:0 10px;width:200px;max-width:100%}.filter-options select:focus{box-shadow:0 1px 3px #252831}.select-label{color:white;font-size:1rem;font-weight:400;margin:10px}#restaurants-list{list-style:none;margin:0;padding:35px 15px 70px;text-align:center;display:flex;flex-flow:row wrap;justify-content:center}#restaurants-list li{font-family:Arial,sans-serif;margin:15px;min-height:380px;padding:0;text-align:left;width:325px;max-width:100%;box-shadow:0 1px 3px lightgrey;border:1px solid lightgrey}#restaurants-list li>div.restaurant-info-container{padding:10px;background:white}#restaurants-list .restaurant-img{background-color:#ccc;display:block;margin:0;max-width:100%;min-height:248px;min-width:100%}#restaurants-list li h1{color:#A86500;font-family:Arial,sans-serif;font-size:14pt;font-weight:200;letter-spacing:0;line-height:1.3;margin:20px 0 10px;text-transform:uppercase}#restaurants-list p{margin:0;font-size:11pt}#restaurants-list li a{background-color:#A86500;color:#fff;display:inline-block;font-size:10pt;margin:15px 0 0;padding:8px 30px 10px;text-align:center;text-decoration:none;text-transform:uppercase}#select-container{display:flex;flex-flow:row wrap;justify-content:center}#navbar{border-bottom:1px solid #d9d9d9}#middle-box{width:725px;max-width:100%;padding:30px 15px 60px}.middlr{display:block;margin:auto}.width-responsive{max-width:100%}#map-container,.inside #map-container{border-bottom:1px solid #d9d9d9}#restaurant-name{color:#f18200;font-family:Arial,sans-serif;font-size:20pt;font-weight:200;letter-spacing:0;margin:15px 0 30px;text-transform:uppercase;line-height:1.1;text-align:center}#restaurant-img{width:100%}#restaurant-address{font-size:12pt;margin:10px 0}#restaurant-cuisine{background-color:#333;color:#ddd;font-size:12pt;font-weight:300;letter-spacing:10px;margin:0 0 20px;padding:2px 0;text-align:center;text-transform:uppercase;width:100%}#restaurant-container,#reviews-container{width:100%;padding:15px 0}#reviews-container h2{color:#f58500;font-size:24pt;font-weight:300;letter-spacing:-1px;padding-bottom:1pt}#reviews-list{margin:0;padding:0}#reviews-list li{background-color:#fff;display:block;list-style-type:none;margin-bottom:30px;overflow:hidden;position:relative;width:100%;box-shadow:0 1px 3px lightgrey;border-top-right-radius:15px;border-bottom-left-radius:15px}#restaurant-hours td{color:#666}p.review-name{font-size:1.75rem;background:#333;color:white;letter-spacing:5px;font-weight:150;padding:15px 30px;margin:0}.review-info-container{padding:15px 30px}.transition{-webkit-transition:transition 0.3s;-moz-transition:transition 0.3s;-o-transition:transition 0.3s;-ms-transition:transition 0.3s;transition:0.3s}.text-center{text-align:center}.rating-span{padding:10px;margin:5px 0;display:inline-block;font-size:1rem}.rating-bad{background:#ff704d;color:white}.rating-fair{background:#ff944d}.rating-good{background:#093;color:white}@media (max-width:875px){#select-container{display:block;flex-flow:initial;justify-content:initial}#middle-box{width:auto}.filter-options select{display:block;margin:auto;margin-bottom:10px}.select-label{text-align:center;display:block}}@media (max-width:475px){nav h1 a{font-size:8pt;letter-spacing:5px}#restaurants-list .restaurant-img{min-height:auto}#restaurants-list li h1{font-size:12pt}#restaurants-list li{min-height:auto}#restaurants-list li a{padding:15px}.filter-options h2{font-size:1rem}#breadcrumb{padding:5px}}
  </style>

  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  <script type="application/javascript" charset="utf-8">
    (function(){let sw=null;if(navigator.serviceWorker && navigator.serviceWorker.register){navigator.serviceWorker.register('/sw.min.js') .then(registration=>{console.log('serviceWorker registered!',registration);sw=registration}) .catch(error=>{console.log(error)})}})()
  </script>

  <title>Restaurant Reviews</title>
</head>

<body>
  <header>
    <nav role="navigation" id="navbar">
      <h1 id="nav-text"><a title="Home Page" href="/">Restaurant Reviews</a></h1>
      <ul id="breadcrumb" aria-label="breadcrumb">
        <li><a title="Skip To Main" href="#select-container">Skip To Main</a></li>
      </ul>
    </nav>
  </header>

  <main id="maincontent">
    <section id="map-container" style="display: none">
      <div id="map" role="application" aria-hidden="true"></div>
    </section>
    <section role="contentinfo" aria-label="Restaurants List">
      <div class="filter-options">
        <h2>Filter Results</h2>
        <br/>

        <div id="select-container">
          <label class="select-label" id="select-label-1" for="neighborhoods-select">Choose Neighborhood
            <select class="transition" id="neighborhoods-select" name="neighborhoods" onchange="updateRestaurants()">
              <option value="all">All Neighborhoods</option>
            </select>
          </label>

          <label class="select-label" id="select-label-2" for="cuisines-select">Choose Cuisine
            <select class="transition" id="cuisines-select" name="cuisines" onchange="updateRestaurants()">
              <option value="all">All Cuisines</option>
            </select>
          </label>
        </div>
      </div>
      <ul id="restaurants-list"></ul>
    </section>
  </main>

  <script type="application/javascript" charset="utf-8" src="js/dbhelper.min.js"></script>
  <script type="application/javascript" charset="utf-8">
  (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){let restaurants,neighborhoods,cuisines;let map
let blob_urls={}
let restaurants_li={}
let initialLoad=!1;window.markers=[];const idb=require('idb');window.initMap=()=>{let loc={lat:40.722216,lng:-73.987501};self.map=new google.maps.Map(document.getElementById('map'),{zoom:12,center:loc,scrollwheel:!1});updateRestaurants()}
document.addEventListener('DOMContentLoaded',(event)=>{fetchNeighborhoods();fetchCuisines();setTimeout(lazyLoadImages,2000)});lazyLoadImages=(event)=>{var images_list=document.querySelectorAll('#restaurants-list li img');images_list.forEach(img=>{let status=img.getAttribute("data-img-status");if(!status||status=="notloaded"){if(elementInViewport2(img)){img.setAttribute("data-img-status","loaded");let id=img.getAttribute('id');let restaurant_id=img.getAttribute('data-restaurant-id');let imgSrc=DBHelper.imageUrlForRestaurant({id:restaurant_id});if(blob_urls[restaurant_id]){img.src=blob_urls[restaurant_id]}
else{asyncLoadImage(imgSrc).then((blob_url)=>{blob_urls[restaurant_id]=blob_url;img.src=blob_urls[restaurant_id];console.log('lazy loaded: ',imgSrc)})}}}})}
document.addEventListener('scroll',lazyLoadImages);document.addEventListener('resize',lazyLoadImages);elementInViewport2=(el)=>{var top=el.offsetTop;var left=el.offsetLeft;var width=el.offsetWidth;var height=el.offsetHeight;while(el.offsetParent){el=el.offsetParent;top+=el.offsetTop;left+=el.offsetLeft}
return(top<(window.pageYOffset+window.innerHeight)&&left<(window.pageXOffset+window.innerWidth)&&(top+height)>window.pageYOffset&&(left+width)>window.pageXOffset)}
fetchNeighborhoods=()=>{DBHelper.fetchNeighborhoods((error,neighborhoods)=>{if(error){console.error(error)}else{self.neighborhoods=neighborhoods;fillNeighborhoodsHTML()}})}
fillNeighborhoodsHTML=(neighborhoods=self.neighborhoods)=>{const select=document.getElementById('neighborhoods-select');neighborhoods.forEach(neighborhood=>{const option=document.createElement('option');option.innerHTML=neighborhood;option.value=neighborhood;select.append(option)})}
fetchCuisines=()=>{DBHelper.fetchCuisines((error,cuisines)=>{if(error){console.error(error)}else{self.cuisines=cuisines;fillCuisinesHTML()}})}
fillCuisinesHTML=(cuisines=self.cuisines)=>{const select=document.getElementById('cuisines-select');cuisines.forEach(cuisine=>{const option=document.createElement('option');option.innerHTML=cuisine;option.value=cuisine;select.append(option)})}
updateRestaurants=()=>{const cSelect=document.getElementById('cuisines-select');const nSelect=document.getElementById('neighborhoods-select');const cIndex=cSelect.selectedIndex;const nIndex=nSelect.selectedIndex;const cuisine=cSelect[cIndex].value;const neighborhood=nSelect[nIndex].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine,neighborhood,(error,restaurants)=>{if(error){console.error(error)}else{resetRestaurants(restaurants);fillRestaurantsHTML();if(initialLoad===!1){document.getElementById('map-container').style.display='block';initialLoad=!0}}})}
resetRestaurants=(restaurants)=>{self.restaurants=[];const ul=document.getElementById('restaurants-list');ul.innerHTML='';self.markers.forEach(m=>m.setMap(null));self.markers=[];self.restaurants=restaurants}
fillRestaurantsHTML=(restaurants=self.restaurants)=>{const ul=document.getElementById('restaurants-list');restaurants.forEach(restaurant=>{ul.append(createRestaurantHTML(restaurant))});addMarkersToMap()}
asyncLoadImage=(img_url)=>{return new Promise(function(resolve,reject){fetch(img_url).then(resp=>resp.blob()).then(blob=>{let blob_url=URL.createObjectURL(blob);return resolve(blob_url)})})}
createRestaurantHTML=(restaurant)=>{const li=document.createElement('li');li.setAttribute("data-restaurant",JSON.stringify(restaurant));const image=document.createElement('img');image.className='restaurant-img';image.setAttribute("alt",`${restaurant.name} (${restaurant.neighborhood})`);image.setAttribute("id",`restaurant-img-${restaurant.id}`);image.setAttribute("data-restaurant-id",restaurant.id);image.setAttribute("data-img-status","notloaded");li.append(image);const div=document.createElement('div');div.className='restaurant-info-container';const name=document.createElement('h1');name.innerHTML=restaurant.name;div.append(name);const neighborhood=document.createElement('p');neighborhood.innerHTML=restaurant.neighborhood;div.append(neighborhood);const address=document.createElement('p');address.innerHTML=restaurant.address;div.append(address);const favBtn=DBHelper.renderFavBtn(restaurant);div.append(favBtn);const more=document.createElement('a');more.innerHTML='View Details';more.href=DBHelper.urlForRestaurant(restaurant);more.setAttribute("title",`See ${restaurant.name} details`);div.append(more);li.append(div);restaurants_li[restaurant.id]=li;return li}
addMarkersToMap=(restaurants=self.restaurants)=>{restaurants.forEach(restaurant=>{const marker=DBHelper.mapMarkerForRestaurant(restaurant,self.map);google.maps.event.addListener(marker,'click',()=>{window.location.href=marker.url});self.markers.push(marker)})}},{"idb":2}],2:[function(require,module,exports){'use strict';(function(){function toArray(arr){return Array.prototype.slice.call(arr)}
function promisifyRequest(request){return new Promise(function(resolve,reject){request.onsuccess=function(){resolve(request.result)};request.onerror=function(){reject(request.error)}})}
function promisifyRequestCall(obj,method,args){var request;var p=new Promise(function(resolve,reject){request=obj[method].apply(obj,args);promisifyRequest(request).then(resolve,reject)});p.request=request;return p}
function promisifyCursorRequestCall(obj,method,args){var p=promisifyRequestCall(obj,method,args);return p.then(function(value){if(!value)return;return new Cursor(value,p.request)})}
function proxyProperties(ProxyClass,targetProp,properties){properties.forEach(function(prop){Object.defineProperty(ProxyClass.prototype,prop,{get:function(){return this[targetProp][prop]},set:function(val){this[targetProp][prop]=val}})})}
function proxyRequestMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach(function(prop){if(!(prop in Constructor.prototype))return;ProxyClass.prototype[prop]=function(){return promisifyRequestCall(this[targetProp],prop,arguments)}})}
function proxyMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach(function(prop){if(!(prop in Constructor.prototype))return;ProxyClass.prototype[prop]=function(){return this[targetProp][prop].apply(this[targetProp],arguments)}})}
function proxyCursorRequestMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach(function(prop){if(!(prop in Constructor.prototype))return;ProxyClass.prototype[prop]=function(){return promisifyCursorRequestCall(this[targetProp],prop,arguments)}})}
function Index(index){this._index=index}
proxyProperties(Index,'_index',['name','keyPath','multiEntry','unique']);proxyRequestMethods(Index,'_index',IDBIndex,['get','getKey','getAll','getAllKeys','count']);proxyCursorRequestMethods(Index,'_index',IDBIndex,['openCursor','openKeyCursor']);function Cursor(cursor,request){this._cursor=cursor;this._request=request}
proxyProperties(Cursor,'_cursor',['direction','key','primaryKey','value']);proxyRequestMethods(Cursor,'_cursor',IDBCursor,['update','delete']);['advance','continue','continuePrimaryKey'].forEach(function(methodName){if(!(methodName in IDBCursor.prototype))return;Cursor.prototype[methodName]=function(){var cursor=this;var args=arguments;return Promise.resolve().then(function(){cursor._cursor[methodName].apply(cursor._cursor,args);return promisifyRequest(cursor._request).then(function(value){if(!value)return;return new Cursor(value,cursor._request)})})}});function ObjectStore(store){this._store=store}
ObjectStore.prototype.createIndex=function(){return new Index(this._store.createIndex.apply(this._store,arguments))};ObjectStore.prototype.index=function(){return new Index(this._store.index.apply(this._store,arguments))};proxyProperties(ObjectStore,'_store',['name','keyPath','indexNames','autoIncrement']);proxyRequestMethods(ObjectStore,'_store',IDBObjectStore,['put','add','delete','clear','get','getAll','getKey','getAllKeys','count']);proxyCursorRequestMethods(ObjectStore,'_store',IDBObjectStore,['openCursor','openKeyCursor']);proxyMethods(ObjectStore,'_store',IDBObjectStore,['deleteIndex']);function Transaction(idbTransaction){this._tx=idbTransaction;this.complete=new Promise(function(resolve,reject){idbTransaction.oncomplete=function(){resolve()};idbTransaction.onerror=function(){reject(idbTransaction.error)};idbTransaction.onabort=function(){reject(idbTransaction.error)}})}
Transaction.prototype.objectStore=function(){return new ObjectStore(this._tx.objectStore.apply(this._tx,arguments))};proxyProperties(Transaction,'_tx',['objectStoreNames','mode']);proxyMethods(Transaction,'_tx',IDBTransaction,['abort']);function UpgradeDB(db,oldVersion,transaction){this._db=db;this.oldVersion=oldVersion;this.transaction=new Transaction(transaction)}
UpgradeDB.prototype.createObjectStore=function(){return new ObjectStore(this._db.createObjectStore.apply(this._db,arguments))};proxyProperties(UpgradeDB,'_db',['name','version','objectStoreNames']);proxyMethods(UpgradeDB,'_db',IDBDatabase,['deleteObjectStore','close']);function DB(db){this._db=db}
DB.prototype.transaction=function(){return new Transaction(this._db.transaction.apply(this._db,arguments))};proxyProperties(DB,'_db',['name','version','objectStoreNames']);proxyMethods(DB,'_db',IDBDatabase,['close']);['openCursor','openKeyCursor'].forEach(function(funcName){[ObjectStore,Index].forEach(function(Constructor){Constructor.prototype[funcName.replace('open','iterate')]=function(){var args=toArray(arguments);var callback=args[args.length-1];var nativeObject=this._store||this._index;var request=nativeObject[funcName].apply(nativeObject,args.slice(0,-1));request.onsuccess=function(){callback(request.result)}}})});[Index,ObjectStore].forEach(function(Constructor){if(Constructor.prototype.getAll)return;Constructor.prototype.getAll=function(query,count){var instance=this;var items=[];return new Promise(function(resolve){instance.iterateCursor(query,function(cursor){if(!cursor){resolve(items);return}
items.push(cursor.value);if(count!==undefined&&items.length==count){resolve(items);return}
cursor.continue()})})}});var exp={open:function(name,version,upgradeCallback){var p=promisifyRequestCall(indexedDB,'open',[name,version]);var request=p.request;request.onupgradeneeded=function(event){if(upgradeCallback){upgradeCallback(new UpgradeDB(request.result,event.oldVersion,request.transaction))}};return p.then(function(db){return new DB(db)})},delete:function(name){return promisifyRequestCall(indexedDB,'deleteDatabase',[name])}};if(typeof module!=='undefined'){module.exports=exp}
else{self.idb=exp}}())},{}]},{},[1])
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDo-h8Qke5DFQrz60Ujspe4agv4JHBKPzc&libraries=places&callback=initMap"></script>


  <footer id="footer">
    Copyright (c) 2017 <a title="Home Page" href="/"><strong>Restaurant Reviews</strong></a> All Rights Reserved.
  </footer>

</body>

</html>
